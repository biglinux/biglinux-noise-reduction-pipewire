#!/usr/bin/env bash

# Set localization environment variables for translations
export TEXTDOMAINDIR="/usr/share/locale"
export TEXTDOMAIN=biglinux-noise-reduction-pipewire

# Verifica o ambiente de área de trabalho e define o titulo da aplicação
declare -g TITLE="$([[ "$XDG_CURRENT_DESKTOP" == "GNOME" ]] && echo "biglinux-noise-reduction-pipewire" || echo "Reduzir ruídos do microfone")"

# Navigate to the application's directory
cd /usr/share/bigbashview/bcc/apps/biglinux-noise-reduction-pipewire/

# Set various environment variables and launch the application with specific settings
QTWEBENGINE_CHROMIUM_FLAGS="--autoplay-policy=no-user-gesture-required" \
QT_QPA_PLATFORM=xcb \
SDL_VIDEODRIVER=x11 \
WINIT_UNIX_BACKEND=x11 \
GDK_BACKEND=x11 \
bigbashview -n "$TITLE" -s 720x400 -c transparent -p "$TEXTDOMAIN" index.sh.htm -i icon/biglinux-noise-reduction-pipewire.svg
